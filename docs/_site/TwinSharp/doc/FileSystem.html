<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>FileSystem Public class | TwinSharp </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="FileSystem Public class | TwinSharp ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/kimblad/TwinSharp/blob/main/TwinSharp/doc/FileSystem.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="TwinSharp">
            TwinSharp
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="filesystem-public-class">FileSystem <code>Public class</code></h1>

<h2 id="description">Description</h2>
<p>The FileSystem class provides methods for interacting with the file system on a target device using the TwinCAT ADS protocol.
It allows opening, closing, reading, writing, seeking, deleting files, as well as creating and deleting directories.</p>
<h2 id="diagram">Diagram</h2>
<pre><code class="lang-mermaid">  flowchart LR
  classDef interfaceStyle stroke-dasharray: 5 5;
  classDef abstractStyle stroke-width:4px
  subgraph TwinSharp
  TwinSharp.FileSystem[[FileSystem]]
  end
  subgraph System
System.IDisposable[[IDisposable]]
  end
System.IDisposable --&gt; TwinSharp.FileSystem
</code></pre>
<h2 id="members">Members</h2>
<h3 id="methods">Methods</h3>
<h4 id="public--methods">Public  methods</h4>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>void</code></td>
<td><a href="#createdirectory"><code>CreateDirectory</code></a>(<code>string</code> path)<br>Create a new folder on the target. Note: does not create folders recursively.</td>
</tr>
<tr>
<td><a href="FileFinder.html"><code>FileFinder</code></a></td>
<td><a href="#createfilefinder"><code>CreateFileFinder</code></a>(<code>string</code> searchQuery)<br>Use a file finder to search for files on target device.</td>
</tr>
<tr>
<td><code>void</code></td>
<td><a href="#deletedirectory"><code>DeleteDirectory</code></a>(<code>string</code> path)<br>Can be used to delete a directory from the data storage device.<br>            A directory containing files cannot be deleted.<br>            Equivavalent to the function block FB_RemoveDir.</td>
</tr>
<tr>
<td><code>void</code></td>
<td><a href="#dispose"><code>Dispose</code></a>()</td>
</tr>
<tr>
<td><code>void</code></td>
<td><a href="#fileclose"><code>FileClose</code></a>(<code>ushort</code> handle)<br>The function block FB_FileClose closes the file, thereby putting it in a defined state for further processing by other programs.<br>            Equivavelent to the TwinCAT function block FB_FileClose.</td>
</tr>
<tr>
<td><code>void</code></td>
<td><a href="#filedelete"><code>FileDelete</code></a>(<code>string</code> pathName)<br>Deletes a file from the data storage device.<br>            Equivavalent to the function block FB_FileDelete.</td>
</tr>
<tr>
<td><code>string</code></td>
<td><a href="#filegetstring"><code>FileGetString</code></a>(<code>ushort</code> handle, out <code>bool</code> endOfFile)</td>
</tr>
<tr>
<td><code>ushort</code></td>
<td><a href="#fileopen"><code>FileOpen</code></a>(<code>string</code> path, <a href="FileOpenModeFlags.html"><code>FileOpenModeFlags</code></a> mode)<br>Creates a new file or opens an existing file for editing.<br>            Equivavelent to the TwinCAT function block FB_FileOpen</td>
</tr>
<tr>
<td><code>void</code></td>
<td><a href="#fileputstring"><code>FilePutString</code></a>(<code>ushort</code> fileHandle, <code>string</code> str)<br>Writes strings into a file. The string is written to the file up to the null termination, but without the null character. The file must have been opened in text mode.<br>            Equivalent to the function block FB_FilePuts</td>
</tr>
<tr>
<td><code>byte``[]</code></td>
<td><a href="#fileread"><code>FileRead</code></a>(<code>ushort</code> handle, <code>int</code> byteCountToRead)<br>The contents of an already opened file can be read. Before a read access, the file must have been opened in the corresponding mode. In addition to the FOPEN_MODEREAD, the appropriate format (FOPEN_MODEBINARY or FOPEN_MODETEXT) is also important to achieve the desired result.<br>            Equivavalent to the function block FB_FileRead.</td>
</tr>
<tr>
<td><code>void</code></td>
<td><a href="#filerename"><code>FileRename</code></a>(<code>string</code> oldPath, <code>string</code> newPath)<br>Can be used to rename a file.<br>            Equivavalent to the function block FB_FileRename.</td>
</tr>
<tr>
<td><code>void</code></td>
<td><a href="#fileseek"><code>FileSeek</code></a>(<code>ushort</code> handle, <code>int</code> position, <code>SeekOrigin</code> origin)<br>Sets the file pointer of an open file to a definable position.<br>            Equivavalent to the function block FB_FileSeek.</td>
</tr>
<tr>
<td><code>int</code></td>
<td><a href="#filetell"><code>FileTell</code></a>(<code>uint</code> handle)<br>Determines the current position of the file pointer. The position indicates the relative offset from the start of the file. <br>            Equivavalent to the function block FB_FileTell.<br>            Note that for files opened in &quot;Append at end of file&quot; mode, the current position is determined by the last I/O operation, not by the position of the next write access.<br>            After a read operation, for example, the file pointer is at the position where the next read access will take place, not at the position where the next write access will take place. In append mode, the file pointer is always moved to the end before the write operation.<br>            If no previous I/O operation was performed and the file was opened in append mode, the file pointer is at the start of the file.</td>
</tr>
<tr>
<td><code>uint</code></td>
<td><a href="#filewrite"><code>FileWrite</code></a>(<code>ushort</code> handle, <code>byte``[]</code> data)<br>Writes data into a file. For write access the file must have been opened in the corresponding mode, and it must be closed again for further processing by external programs.<br>            Equivalent to the function block FB_FileWrite.</td>
</tr>
<tr>
<td><a href="ST_FindFileEntry.html"><code>ST_FindFileEntry</code></a></td>
<td><a href="#getfileproperties"><code>GetFileProperties</code></a>(<code>string</code> path)</td>
</tr>
</tbody>
</table>
<h4 id="internal-static-methods">Internal Static methods</h4>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="ST_FindFileEntry.html"><code>ST_FindFileEntry</code></a></td>
<td><a href="#createfileentry"><code>CreateFileEntry</code></a>(<code>byte``[]</code> buffer)</td>
</tr>
</tbody>
</table>
<h2 id="details">Details</h2>
<h3 id="summary">Summary</h3>
<p>The FileSystem class provides methods for interacting with the file system on a target device using the TwinCAT ADS protocol.
It allows opening, closing, reading, writing, seeking, deleting files, as well as creating and deleting directories.</p>
<h3 id="inheritance">Inheritance</h3>
<ul>
<li><code>IDisposable</code></li>
</ul>
<h3 id="constructors">Constructors</h3>
<h4 id="filesystem">FileSystem</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L14"><em>Source code</em></a></p>
<pre><code class="lang-csharp">internal FileSystem(AmsNetId target)
</code></pre>
<h5 id="arguments">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AmsNetId</code></td>
<td>target</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="methods-1">Methods</h3>
<h4 id="fileopen">FileOpen</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L27"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public ushort FileOpen(string path, FileOpenModeFlags mode)
</code></pre>
<h5 id="arguments-1">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>path</td>
<td></td>
</tr>
<tr>
<td><a href="FileOpenModeFlags.html"><code>FileOpenModeFlags</code></a></td>
<td>mode</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="summary-1">Summary</h5>
<p>Creates a new file or opens an existing file for editing.
Equivavelent to the TwinCAT function block FB_FileOpen</p>
<h4 id="fileclose">FileClose</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L48"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public void FileClose(ushort handle)
</code></pre>
<h5 id="arguments-2">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ushort</code></td>
<td>handle</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="summary-2">Summary</h5>
<p>The function block FB_FileClose closes the file, thereby putting it in a defined state for further processing by other programs.
Equivavelent to the TwinCAT function block FB_FileClose.</p>
<h4 id="filegetstring">FileGetString</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L68"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public string FileGetString(ushort handle, out bool endOfFile)
</code></pre>
<h5 id="arguments-3">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ushort</code></td>
<td>handle</td>
<td></td>
</tr>
<tr>
<td><code>out</code> <code>bool</code></td>
<td>endOfFile</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="fileputstring">FilePutString</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L100"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public void FilePutString(ushort fileHandle, string str)
</code></pre>
<h5 id="arguments-4">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ushort</code></td>
<td>fileHandle</td>
<td></td>
</tr>
<tr>
<td><code>string</code></td>
<td>str</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="summary-3">Summary</h5>
<p>Writes strings into a file. The string is written to the file up to the null termination, but without the null character. The file must have been opened in text mode.
Equivalent to the function block FB_FilePuts</p>
<h4 id="fileread">FileRead</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L120"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public byte FileRead(ushort handle, int byteCountToRead)
</code></pre>
<h5 id="arguments-5">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ushort</code></td>
<td>handle</td>
<td></td>
</tr>
<tr>
<td><code>int</code></td>
<td>byteCountToRead</td>
<td>Number of bytes to be read.</td>
</tr>
</tbody>
</table>
<h5 id="summary-4">Summary</h5>
<p>The contents of an already opened file can be read. Before a read access, the file must have been opened in the corresponding mode. In addition to the FOPEN_MODEREAD, the appropriate format (FOPEN_MODEBINARY or FOPEN_MODETEXT) is also important to achieve the desired result.
Equivavalent to the function block FB_FileRead.</p>
<h5 id="returns">Returns</h5>
<h4 id="filewrite">FileWrite</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L150"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public uint FileWrite(ushort handle, byte[] data)
</code></pre>
<h5 id="arguments-6">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ushort</code></td>
<td>handle</td>
<td></td>
</tr>
<tr>
<td><code>byte``[]</code></td>
<td>data</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="summary-5">Summary</h5>
<p>Writes data into a file. For write access the file must have been opened in the corresponding mode, and it must be closed again for further processing by external programs.
Equivalent to the function block FB_FileWrite.</p>
<h5 id="returns-1">Returns</h5>
<p>The number of bytes that were sucessfully written.</p>
<h4 id="fileseek">FileSeek</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L172"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public void FileSeek(ushort handle, int position, SeekOrigin origin)
</code></pre>
<h5 id="arguments-7">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ushort</code></td>
<td>handle</td>
<td></td>
</tr>
<tr>
<td><code>int</code></td>
<td>position</td>
<td></td>
</tr>
<tr>
<td><code>SeekOrigin</code></td>
<td>origin</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="summary-6">Summary</h5>
<p>Sets the file pointer of an open file to a definable position.
Equivavalent to the function block FB_FileSeek.</p>
<h4 id="filetell">FileTell</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L199"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public int FileTell(uint handle)
</code></pre>
<h5 id="arguments-8">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>uint</code></td>
<td>handle</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="summary-7">Summary</h5>
<p>Determines the current position of the file pointer. The position indicates the relative offset from the start of the file.
Equivavalent to the function block FB_FileTell.
Note that for files opened in &quot;Append at end of file&quot; mode, the current position is determined by the last I/O operation, not by the position of the next write access.
After a read operation, for example, the file pointer is at the position where the next read access will take place, not at the position where the next write access will take place. In append mode, the file pointer is always moved to the end before the write operation.
If no previous I/O operation was performed and the file was opened in append mode, the file pointer is at the start of the file.</p>
<h5 id="returns-2">Returns</h5>
<p>The current position of the file pointer.</p>
<h4 id="filedelete">FileDelete</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L219"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public void FileDelete(string pathName)
</code></pre>
<h5 id="arguments-9">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>pathName</td>
<td>File name, including the full path.</td>
</tr>
</tbody>
</table>
<h5 id="summary-8">Summary</h5>
<p>Deletes a file from the data storage device.
Equivavalent to the function block FB_FileDelete.</p>
<h4 id="filerename">FileRename</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L237"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public void FileRename(string oldPath, string newPath)
</code></pre>
<h5 id="arguments-10">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>oldPath</td>
<td></td>
</tr>
<tr>
<td><code>string</code></td>
<td>newPath</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="summary-9">Summary</h5>
<p>Can be used to rename a file.
Equivavalent to the function block FB_FileRename.</p>
<h4 id="createdirectory">CreateDirectory</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L253"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public void CreateDirectory(string path)
</code></pre>
<h5 id="arguments-11">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>path</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="summary-10">Summary</h5>
<p>Create a new folder on the target. Note: does not create folders recursively.</p>
<h4 id="deletedirectory">DeleteDirectory</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L272"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public void DeleteDirectory(string path)
</code></pre>
<h5 id="arguments-12">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>path</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="summary-11">Summary</h5>
<p>Can be used to delete a directory from the data storage device.
A directory containing files cannot be deleted.
Equivavalent to the function block FB_RemoveDir.</p>
<h4 id="getfileproperties">GetFileProperties</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L289"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public ST_FindFileEntry GetFileProperties(string path)
</code></pre>
<h5 id="arguments-13">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>path</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="summary-12">Summary</h5>
<h5 id="returns-3">Returns</h5>
<h4 id="createfileentry">CreateFileEntry</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L311"><em>Source code</em></a></p>
<pre><code class="lang-csharp">internal static ST_FindFileEntry CreateFileEntry(byte[] buffer)
</code></pre>
<h5 id="arguments-14">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>byte``[]</code></td>
<td>buffer</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="createfilefinder">CreateFileFinder</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L381"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public FileFinder CreateFileFinder(string searchQuery)
</code></pre>
<h5 id="arguments-15">Arguments</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>searchQuery</td>
<td>A valid directory name or directory with file name as string. The string can contain (* and ? ) as wildcards. If the path ends with a wildcard, dot or the directory name, the user must have access rights to this path and its subdirectories.</td>
</tr>
</tbody>
</table>
<h5 id="summary-13">Summary</h5>
<p>Use a file finder to search for files on target device.</p>
<h5 id="returns-4">Returns</h5>
<h4 id="dispose">Dispose</h4>
<p><a href="https://github.com///blob//TwinSharp/FileSystem.cs#L403"><em>Source code</em></a></p>
<pre><code class="lang-csharp">public virtual void Dispose()
</code></pre>
<p><em>Generated with</em> <a href="https://github.com/hailstorm75/ModularDoc"><em>ModularDoc</em></a></p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/kimblad/TwinSharp/blob/main/TwinSharp/doc/FileSystem.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
